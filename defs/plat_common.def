# Definitions for RHEL4

# 3rd PARTY INCLUDES

ifeq ($(PACKAGING_COMMAND), rpmbuild)
	PACKAGING_VERSION := $(shell $(PACKAGING_COMMAND) --version)
endif

ifeq ($(PACKAGING_VERSION), RPM version 4.4.1)
	RPMCOPYRIGHTSTR := License
else
	RPMCOPYRIGHTSTR := Copyright
endif
ifeq ($(PACKAGING_VERSION), RPM version 4.4.2)
	RPMCOPYRIGHTSTR := License
endif

COMPAT_LIBSTDC := compat-libstdc++

BUNDLE_EXT := tgz

THIRD_PARTY	:= $(BUILD_ROOT)/../ThirdParty
THIRD_PARTY_BUILDS	:= $(BUILD_ROOT)/../ThirdPartyBuilds

PCRE_VERSION	:= 7.8
EXPAT_VERSION	:= 2.0.1
POPT_VERSION	:= 1.14

LDAP_VERSION	:= 2.4.21.7z
LDAP_DIR	:= openldap
LDAP_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/$(LDAP_DIR)/$(LDAP_DIR)-$(LDAP_VERSION)
LDAP_LIBS	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/$(LDAP_DIR)/$(LDAP_DIR)-libs-$(LDAP_VERSION)

BDB_VERSION	:= 4.7.25.4
BDB_DIR		:= bdb-$(BDB_VERSION)
BDB_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/bdb/$(BDB_DIR)

TCMALLOC_VERSION	:= 1.5
TCMALLOC_DIR		:= tcmalloc-$(TCMALLOC_VERSION)
TCMALLOC_SOURCE		:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/tcmalloc/$(TCMALLOC_DIR)

TOMCAT_MAJOR_VER	:= 5
TOMCAT_MINOR_VER	:= 5
TOMCAT_MICRO_VER	:= 15
TOMCAT_VERSION		:= $(TOMCAT_MAJOR_VER).$(TOMCAT_MINOR_VER).$(TOMCAT_MICRO_VER)
TOMCAT_DIR				:= apache-tomcat-$(TOMCAT_VERSION)
TOMCAT_HOME				:= /opt/zimbra/$(TOMCAT_DIR)
TOMCAT_SOURCE			:= $(THIRD_PARTY)/jakarta-tomcat/$(TOMCAT_DIR)

JETTY_MAJOR_VER		:= 6
JETTY_MINOR_VER		:= 1
JETTY_MICRO_VER		:= 22.z6
JETTY_VERSION			:= $(JETTY_MAJOR_VER).$(JETTY_MINOR_VER).$(JETTY_MICRO_VER)
JETTY_DIR					:= jetty-$(JETTY_VERSION)
JETTY_HOME				:= /opt/zimbra/$(JETTY_DIR)
JETTY_SOURCE			:= $(THIRD_PARTY)/jetty/$(JETTY_DIR)

ifeq ($(ZIMBRA_USE_TOMCAT), 1)
MAILBOXD_SERVER := tomcat
MAILBOXD_MINOR_VERSION := $(TOMCAT_MAJOR_VER).$(TOMCAT_MINOR_VER)
MAILBOXD_VERSION := $(TOMCAT_VERSION)
MAILBOXD_DIR := $(TOMCAT_DIR)
MAILBOXD_SOURCE := $(TOMCAT_SOURCE)
else
MAILBOXD_SERVER := jetty
MAILBOXD_MINOR_VERSION := $(JETTY_MAJOR_VER).$(JETTY_MINOR_VER)
MAILBOXD_VERSION := $(JETTY_VERSION)
MAILBOXD_DIR := $(JETTY_DIR)
MAILBOXD_SOURCE := $(JETTY_SOURCE)
endif

MYSQL_VERSION_STRING := 5.0.90
MYSQL_VERSION	:= standard-$(MYSQL_VERSION_STRING)-pc-linux-gnu-i686-glibc23
MYSQL_DIR	= mysql-$(MYSQL_VERSION)
MYSQL_SOURCE 	= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/mysql/$(MYSQL_DIR)

POSTFIX_VERSION := 2.6.5.2z
POSTFIX_DIR	:= postfix-$(POSTFIX_VERSION)
POSTFIX_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/postfix/$(POSTFIX_DIR)

APACHE_VERSION := 2.2.14
APACHE_DIR  := httpd-$(APACHE_VERSION)
APACHE_SOURCE := $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/apache-httpd/$(APACHE_DIR)

SPELL_VERSION := 0.60.6
SPELL_DIR := aspell-$(SPELL_VERSION)
SPELL_SOURCE := $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/aspell/$(SPELL_DIR)

RRD_VERSION	:= 1.2.30
RRD_DIR 	:= rrdtool-$(RRD_VERSION)
RRD_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/rrdtool/$(RRD_DIR)

SNMP_VERSION := 5.5
SNMP_DIR	:= net-snmp-$(SNMP_VERSION)
SNMP_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/snmp/$(SNMP_DIR)

JAVA_VERSION	:= 1.6.0_16
JAVA_FILE	:= jdk
JAVA_DIR	:= java
JAVA_SOURCE	:= $(THIRD_PARTY_BUILDS)/i386/$(JAVA_DIR)/$(JAVA_FILE)$(JAVA_VERSION)

ZIMBRA_USE_CBPOLICYD ?= 0
CBPOLICYD_VERSION := 2.0.6
CBPOLICYD_DIR := cbpolicyd-$(CBPOLICYD_VERSION)
CBPOLICYD_SOURCE := $(ZMCBPOLICYD_DIR)/src/$(CBPOLICYD_DIR).tgz

MEMCACHED_VERSION	:= 1.4.4
MEMCACHED_DIR		:= memcached-$(MEMCACHED_VERSION)
MEMCACHED_SOURCE 	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/memcached/$(MEMCACHED_DIR)

NGINX_VERSION	:= 0.5.37-zimbra
NGINX_DIR	:= nginx-$(NGINX_VERSION)
NGINX_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/nginx/$(NGINX_DIR)

CLAMAV_VERSION := 0.95.3
CLAMAV_DIR :=  clamav
CLAMAV_SOURCE := $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/$(CLAMAV_DIR)/clamav-$(CLAMAV_VERSION)

ALTERMIME_VERSION := 0.3-dev
ALTERMIME_DIR := altermime
ALTERMIME_SOURCE := $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/$(ALTERMIME_DIR)/$(ALTERMIME_DIR)-$(ALTERMIME_VERSION)

AMAVISD_VERSION	:= 2.6.4
AMAVISD_DIR	:=  amavisd
AMAVISD_SOURCE	:= $(THIRD_PARTY)/$(AMAVISD_DIR)/amavisd-new-$(AMAVISD_VERSION)

DSPAM_VERSION	:= 3.9.0
DSPAM_DIR	:=  dspam
DSPAM_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/$(DSPAM_DIR)/$(DSPAM_DIR)-$(DSPAM_VERSION)

SASL_VERSION	:= 2.1.23.3z
SASL_DIR	:= cyrus-sasl
SASL_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/$(SASL_DIR)/$(SASL_DIR)-$(SASL_VERSION)

OPENSSL_VERSION	:= 0.9.8n
OPENSSL_DIR	:= openssl
OPENSSL_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/$(OPENSSL_DIR)/$(OPENSSL_DIR)-$(OPENSSL_VERSION)

HEIMDAL_VERSION	?= 1.3.1
HEIMDAL_DIR	:= heimdal
HEIMDAL_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/$(HEIMDAL_DIR)/$(HEIMDAL_DIR)-$(HEIMDAL_VERSION)

LIBTOOL_VERSION	:= 2.2.6b
LIBTOOL_DIR	:= libtool
LIBTOOL_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/$(LIBTOOL_DIR)/$(LIBTOOL_DIR)-$(LIBTOOL_VERSION)

CURL_VERSION	:= 7.20.0
CURL_DIR	:= curl
CURL_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/$(CURL_DIR)/$(CURL_DIR)-$(CURL_VERSION)

JAVA_BINARY := /opt/zimbra/java/bin/java

JNI_EXT := so

PERL_LIB_SOURCE	:= $(THIRD_PARTY_BUILDS)/$(BUILD_PLATFORM)/perl
PERL_LIB_BUILD := $(THIRD_PARTY)/Perl
